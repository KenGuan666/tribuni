(()=>{var e={};e.id=885,e.ids=[885],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},42185:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>c}),s(194),s(46572),s(97857);var r=s(56126),i=s(51947),a=s(98952),n=s.n(a),l=s(16971),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["subscriptions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,194)),"C:\\Users\\17gua\\Desktop\\cryptos\\tribuni\\next-app\\app\\subscriptions\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,48287))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,46572)),"C:\\Users\\17gua\\Desktop\\cryptos\\tribuni\\next-app\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,97857,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,48287))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["C:\\Users\\17gua\\Desktop\\cryptos\\tribuni\\next-app\\app\\subscriptions\\page.jsx"],u="/subscriptions/page",d={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/subscriptions/page",pathname:"/subscriptions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},44655:(e,t,s)=>{Promise.resolve().then(s.bind(s,58647)),Promise.resolve().then(s.bind(s,1214))},58647:(e,t,s)=>{"use strict";s.d(t,{RenderList:()=>d});var r=s(46496),i=s(47364),a=s.n(i),n=s(88925),l=s(50686),o=s(42270),c=s(77115),p=s(21529),u=s(48189);let d=({protocols:e,total:t,lastUpdated:s})=>{let{user:d,protocolFilter:x,setProtocolFilter:m}=(0,p.o)(),[h,g]=(0,i.useState)(""),f=e.filter(e=>{let t=e.name.toLowerCase().startsWith(h.toLowerCase()),s=d.subscriptions.includes(e.id);return t&&s}),[b,v]=(0,i.useState)(!1);return!0===b?r.jsx(u.$,{classes:(0,l.Z)("w-5 h-5 border-isBlueLight")}):(0,r.jsxs)(a().Fragment,{children:[(0,r.jsxs)("div",{className:(0,l.Z)("flex flex-row items-center space-x-1 w-full px-2 pb-2",o.k2,o.d),children:[r.jsx(c.J5,{classes:(0,l.Z)("w-9 h-9 fill-isLabelLightPrimary")}),r.jsx("div",{className:"text-2xl text-isLabelLightPrimary font-600",children:"Subscriptions"})]}),r.jsx("hr",{className:"w-full mt-1 mb-1 rounded-full bg-isSeparatorLight"}),(0,r.jsxs)("div",{className:(0,l.Z)("w-full overflow-y-scroll grow !mb-0 flex flex-col",o.k2,o.d),children:[f.map((t,s)=>{let i=0===s||e[s-1].name[0].toLowerCase()!==e[s].name[0].toLowerCase()?e[s].name[0]:null,p=t.id,u=t.name;return(0,r.jsxs)("div",{className:"contents",children:[null!==i?(0,r.jsxs)(a().Fragment,{children:[r.jsx("div",{className:(0,l.Z)("px-3 pt-4 pb-1 text-sm uppercase text-isLabelLightSecondary font-600",""!==h?"hidden":""),children:h?.length>0?h[0]:i}),r.jsx("div",{className:(0,l.Z)("w-full px-3",""!==h?"hidden":""),children:r.jsx("hr",{className:"w-full rounded-full bg-isSeparatorLight"})})]}):r.jsx(r.Fragment,{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between w-full group",children:[(0,r.jsxs)(n.default,{onClick:()=>{v(!0)},href:`/proposals?protocol=${p}&username=${d.id}&chatid=${d.chatid}`,className:"flex flex-col items-center justify-between w-full group-hover:bg-isSeparatorLight",children:[r.jsx("div",{className:(0,l.Z)("grow pt-2 leading-none px-3 w-full text-base"),children:(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})(u).trim()}),(0,r.jsxs)("div",{className:"flex flex-row items-center w-full px-3 pt-1 pb-2",children:["0"!==t.new&&(0,r.jsxs)("div",{className:(0,l.Z)("px-1 mr-1 text-xs py-[0.05rem] rounded-md text-isWhite font-500 tabular-nums bg-isBlueLight"),children:[t.new," new"]}),(0,r.jsxs)("div",{className:(0,l.Z)("px-1 mr-1 text-xs py-[0.05rem] rounded-md text-isWhite font-500 tabular-nums","0"===t.active?"bg-isRedLight":"bg-isOrangeLight"),children:[t.active," active"]})]})]}),r.jsx("div",{className:"h-full p-[0.65rem] group-hover:bg-isSeparatorLight",children:(0,r.jsxs)("button",{className:(0,l.Z)("flex flex-row items-center h-full px-2 space-x-1 text-sm rounded-lg place-content-center bg-isRedLight text-isWhite font-500 hover:bg-isRedLightEmphasis",o.k2),children:[r.jsx(c.rY,{classes:(0,l.Z)("w-6 h-6 fill-isWhite")}),r.jsx("div",{className:"",children:"Unsubscribe"})]})})]}),r.jsx("div",{className:"w-full px-3",children:r.jsx("hr",{className:"w-full rounded-full bg-isSeparatorLight"})})]},p)}),0===f.length&&r.jsx(a().Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center w-full h-full px-3 py-5 text-center grow place-content-start",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-12 h-12 fill-isLabelLightSecondary",children:r.jsx("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})}),r.jsx("div",{className:"text-xl text-center break-all text-isSystemDarkTertiary font-700",children:"No subscriptions found"}),r.jsx("div",{className:"text-sm text-center text-isLabelLightSecondary font-500",children:"Try subscribing some protocols to start receiving proposal alerts."})]})})]}),r.jsx("hr",{className:"w-full mb-2 -mt-[1px] rounded-full bg-isSeparatorLight"}),(0,r.jsxs)("div",{className:(0,l.Z)("place-content-center flex flex-row items-center space-x-1 text-xs font-500 w-full px-2",o.d),children:[(0,r.jsxs)("div",{className:"px-[0.3rem] py-[0.1rem] rounded-md bg-isPurpleLight text-isWhite",children:[e.length," Protocols"]}),(0,r.jsxs)("div",{className:"px-[0.3rem] py-[0.1rem] rounded-md bg-isIndigoLight text-isWhite",children:[t," Proposals"]})]})]})}},194:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h,getData:()=>m,revalidate:()=>x});var r=s(43859),i=s(9725),a=s(10028),n=s(78278),l=s(23215);let o=(0,l.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\app\subscriptions\RenderList.jsx`),{__esModule:c,$$typeof:p}=o;o.default,(0,l.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\app\subscriptions\RenderList.jsx#capitalizeFirstLetter`),(0,l.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\app\subscriptions\RenderList.jsx#separateDAO`);let u=(0,l.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\app\subscriptions\RenderList.jsx#RenderList`);var d=s(23542);let x=0,m=async()=>{let e=`
    SELECT
        p.id AS id,
        p.name AS name,
        p.icon AS icon,
        COUNT(pr.protocol) AS total,
        SUM(CASE WHEN pr.endtime > EXTRACT(EPOCH FROM CURRENT_TIMESTAMP) THEN 1 ELSE 0 END) AS active,
        SUM(CASE WHEN pr.starttime < EXTRACT(EPOCH FROM CURRENT_TIMESTAMP) AND EXTRACT(EPOCH FROM CURRENT_TIMESTAMP) - pr.starttime <= 48 * 3600 THEN 1 ELSE 0 END) AS new
    FROM
        protocols p
    LEFT JOIN
        proposals pr ON p.id = pr.protocol
    GROUP BY
        p.id, p.name, p.icon;
`,t=await d.i.unsafe(e);(t=t.map(({name:e,count:t,...s})=>({name:e.trim(),count:parseInt(t),...s}))).sort((e,t)=>e.name.localeCompare(t.name));let s=t.reduce((e,t)=>e+parseInt(t.total||0,10),0);return{protocols:t,total:s}};async function h(){let{protocols:e,total:t}=await m();return r.jsx(i.w,{children:r.jsx("div",{className:(0,n.Z)("flex flex-col items-center w-full grow overflow-hidden pb-2",a.d),children:r.jsx(u,{protocols:e,total:t,lastUpdated:new Date().toUTCString()})})})}},10028:(e,t,s)=>{"use strict";s.d(t,{AL:()=>a,d:()=>i});var r=s(78278);(0,r.W)("duration-200 transition-all ease-in-out");let i=(0,r.W)("max-w-xl"),a={id:null,chatid:null,premium:0,email:null,subscriptions:[],duration:86400,pause_alerts:!1,telegram_alerts:!0,email_alerts:!1,last_telegram_alert:0,last_email_alert:0};(0,r.W)("w-full p-1 bg-isWhite text-isLabelLightPrimary rounded-xl min-w-[22rem] shadow-sm border-isSeparatorLight")},23542:(e,t,s)=>{"use strict";s.d(t,{o:()=>i,i:()=>r});let r=(0,s(71468).Z)({host:process.env.DB_HOST,port:process.env.DB_PORT,database:process.env.DB_NAME,username:process.env.DB_USERNAME,password:process.env.DB_PASSWORD,ssl:!1,max:20,max_lifetime:null,idle_timeout:60,connect_timeout:30});function i(e){return null==e?null:e.replace(/'/g,"''")}},9725:(e,t,s)=>{"use strict";s.d(t,{w:()=>p,$:()=>a});var r=s(43859),i=s(78278);let a=({classes:e})=>r.jsx("div",{className:(0,i.Z)("inline-block border-[3.5px] rounded-full animate-spin  border-t-transparent drop-shadow-sm",e),role:"status","aria-label":"loading",children:r.jsx("span",{className:"sr-only",children:"Loading..."})});var n=s(23215);let l=(0,n.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\components\loaders\PageLoader.jsx`),{__esModule:o,$$typeof:c}=l;l.default;let p=(0,n.createProxy)(String.raw`C:\Users\17gua\Desktop\cryptos\tribuni\next-app\components\loaders\PageLoader.jsx#PageLoader`)},48287:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(73324);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[558,358,468,776,324,410],()=>s(42185));module.exports=r})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{1908:function(e,t,l){Promise.resolve().then(l.bind(l,8289)),Promise.resolve().then(l.bind(l,8863)),Promise.resolve().then(l.bind(l,5268)),Promise.resolve().then(l.bind(l,9184)),Promise.resolve().then(l.bind(l,1148))},8289:function(e,t,l){"use strict";l.d(t,{Header:function(){return c}});var s=l(5862),r=l(7058),a=l(8926),i=l.n(a),n=l(6357);let c=e=>{let{protocolInfo:t}=e,{activeProposal:l,setActiveProposal:a}=(0,n.o)();return(0,s.jsx)(r.Fragment,{children:null===l&&(0,s.jsx)("div",{className:"contents",children:(0,s.jsxs)("div",{className:"flex flex-col items-center w-full my-2 space-y-2",children:[(0,s.jsxs)("div",{className:"relative w-[4.5rem] h-[4.5rem] overflow-hidden rounded-full",children:[(0,s.jsx)("div",{className:"absolute w-full h-full bg-gradient-to-br from-isWhite to-isSystemLightTertiary animate-pulse"}),(0,s.jsx)(i(),{fill:!0,src:t.icon,alt:"Logo of ".concat(t.name," protocol")})]}),(0,s.jsx)("div",{className:"inline-block w-full text-xl text-center font-600 text-isLabelLightPrimary",children:t.name})]})})})}},8863:function(e,t,l){"use strict";l.d(t,{Manage:function(){return m}});var s=l(5862),r=l(7058);l(4231),l(107);var a=(0,l(6404).$)("9977ed591f4dffb1a610662d81af2680cfccfacd"),i=l(7516),n=l(5296),c=l(8187),o=l(6357),d=l(7783),u=l(5978);let m=e=>{let{proposals:t}=e,{user:l,setUser:m,activeProposal:x}=(0,o.o)(),f=(0,i.useSearchParams)().get("protocol"),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!0),w=()=>{l.id&&l.chatid&&f&&(l.subscriptions.includes(f)?g(!0):g(!1),!0===p&&b(!1))};if((0,r.useEffect)(()=>{w()},[l,f]),null===x)return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{className:(0,n.Z)("flex flex-row items-center justify-between w-full px-4 py-2 rounded-xl bg-isWhite mt-4",c.d),children:[(0,s.jsx)("div",{className:"text-base text-isLabelLightPrimary font-400",children:"Subscribed"}),!0===p?(0,s.jsx)(d.$,{classes:(0,n.Z)("w-5 h-5 border-isBlueLight")}):(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{onChange:async()=>{let e=l.subscriptions;c.AL,m(e.includes(f)?{...l,subscriptions:e.filter(e=>e!==f)}:{...l,subscriptions:[...e,f]}),g(!h),await a({username:l.id,protocol:f})},type:"checkbox",checked:h,className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-isGreenLight"})]})]}),(0,s.jsx)("div",{className:"w-full"}),(0,s.jsx)(u.Hr,{classes:(0,n.Z)("my-3 !px-0")})]})}},5268:function(e,t,l){"use strict";l.d(t,{Navigator:function(){return o}});var s=l(5862),r=l(8187),a=l(6357),i=l(5296),n=l(4231),c=l(7516);let o=()=>{let e=(0,c.useSearchParams)(),t=e.get("username"),l=e.get("chatid"),{activeProposal:o,setActiveProposal:d}=(0,a.o)();return(0,s.jsx)("div",{className:(0,i.Z)("flex flex-col items-start w-full group",r.k2,r.d),children:null===o?(0,s.jsxs)(n.default,{href:"/protocols?username=".concat(t,"&chatid=").concat(l),className:(0,i.Z)("flex flex-row items-center space-x-0",r.k2),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:(0,i.Z)("w-6 h-6 fill-isBlueLight stroke-isBlueLight",r.k2),children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z",clipRule:"evenodd"})}),(0,s.jsx)("div",{className:(0,i.Z)("text-sm text-isBlueLight font-500",r.k2),children:"Protocols"})]}):(0,s.jsxs)("button",{onClick:()=>{d(null)},className:(0,i.Z)("flex flex-row items-center space-x-0",r.k2),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:(0,i.Z)("w-6 h-6 fill-isBlueLight stroke-isBlueLight",r.k2),children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z",clipRule:"evenodd"})}),(0,s.jsx)("div",{className:(0,i.Z)("text-sm text-isBlueLight font-500",r.k2),children:"Back"})]})})}},9184:function(e,t,l){"use strict";l.d(t,{RenderList:function(){return x}});var s=l(5862),r=l(7058),a=l(5296),i=l(8187),n=l(7516),c=l(6357),o=l(2789);l(4231),l(107);var d=(0,l(6404).$)("71aa5649846fce8ebe08023203df78b9d8db3d88"),u=l(5978);let m=e=>{let{proposalMap:t,protocol:l}=e,{activeProposal:n,user:m,setUser:x}=(0,c.o)();Date.now(),t[n].starttime,t[n].endtime,Date.now();let f={starttime:1e3*t[n].starttime,endtime:1e3*t[n].endtime},h={startDate:new Date(f.starttime),endDate:new Date(f.endtime)},g=Intl.DateTimeFormat().resolvedOptions().timeZone;h.startDate.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0,timeZone:g}),h.endDate.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0,timeZone:g});let p=0,b=0,w=m.bookmarks.includes(n);t[n].results&&0!==t[n].results.length&&(p=t[n].results.reduce((e,t)=>e+parseFloat(t.total),0),b=t[n].results.map((e,t)=>parseFloat(e.total)/p*100));let v=["rgb(0, 199, 190)","rgb(50, 173, 230)","rgb(0, 122, 255)","rgb(88, 86, 214)","rgb(175, 82, 222)","rgb(255, 45, 85)","rgb(162, 132, 94)"],{value:j,unit:y,tense:N}=function(e){let t=new Date,l=new Date(e)-t,s=Math.floor(l/1e3/60/60/24),r=Math.floor(s/30),a=Math.floor(s/365);return a>0?{value:a,unit:"years",tense:l>=0?"left":"ago"}:r>0?{value:r,unit:"months",tense:l>=0?"left":"ago"}:s>0?{value:s,unit:"days",tense:l>=0?"left":"ago"}:{value:"0",unit:"days",tense:"left"}}(1e3*t[n].endtime);return(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("div",{id:"",className:"w-full px-3 pt-1 pb-2 rounded-xl",children:[(0,s.jsxs)("div",{className:"z-10 flex flex-row items-center justify-between w-full space-x-1 text-sm font-500 place-content-end",children:[(0,s.jsx)("button",{className:(0,a.Z)("flex flex-row items-center font-500 px-3 py-1 leading-tight rounded-lg bg-isBlueLight text-isLabelDarkPrimary !-ml-1",i.k2),children:l}),(0,s.jsx)("div",{}),(0,s.jsxs)("button",{onClick:async()=>{let e=m.bookmarks;i.AL,x(e.includes(n)?{...m,bookmarks:e.filter(e=>e!==n)}:{...m,bookmarks:[...e,n]}),await d({username:m.id,proposal:n})},className:(0,a.Z)("flex flex-row items-center px-3  py-1 leading-tight rounded-lg text-isLabelDarkPrimary !-mr-1",i.k2,w?"bg-isGreenLight":"bg-isOrangeLight"),children:[(0,s.jsx)("div",{className:"font-500",children:w?"Bookmarked":"Bookmark"}),w?(0,s.jsx)(o.od,{classes:(0,a.Z)("h-5 w-5 ml-[0.2rem] -mr-1 fill-isLabelDarkPrimary")}):(0,s.jsx)(o.kw,{classes:(0,a.Z)("h-5 w-5 -mr-1 fill-isLabelDarkPrimary")})]})]}),(0,s.jsx)("div",{className:"py-2 mt-2 text-xl tracking-tight leading-tight text-left text-isLabelLightPrimary font-600",children:t[n].title.replace(/"/g,"")}),(0,s.jsx)("hr",{className:"mb-5 rounded-full bg-isSeparatorLight mt-2"}),(0,s.jsxs)("div",{className:"w-full flex flex-row items-center space-x-4 h-12",children:[(0,s.jsxs)("div",{className:"w-5/12 flex justify-evenly flex-row items-center place-content-center bg-isWhite text-isLabelLightPrimary rounded-xl h-full",children:[(0,s.jsx)("div",{className:"w-fit flex flex-col items-end place-content-center text-3xl shrink-0 font-700 text-isSystemDarkTertiary",children:j}),(0,s.jsxs)("div",{className:"flex flex-col items-start w-fit text-isLabelLightSecondary leading-tight font-500",children:[(0,s.jsx)("div",{children:y}),(0,s.jsx)("div",{children:N})]})]}),t[n].url&&null!==t[n].url&&"undefined"!==t[n].url&&(0,s.jsx)("a",{href:t[n].url,rel:"noopener noreferrer",target:"_blank",className:"w-7/12 flex flex-col items-center place-content-center bg-isBlueLight text-lg font-600 text-isWhite rounded-xl h-full",children:"Vote Now"})]}),t[n].results&&0!==t[n].results.length&&(0,s.jsx)("div",{className:"w-full h-fit mt-5",children:(0,s.jsx)("div",{className:"flex flex-col items-center w-full bg-isWhite p-4 rounded-xl",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"flex flex-col items-center w-full text-xs capitalize rounded-lg bg-isWhite text-isLabelLightSecondary font-400",children:t[n].choices.map((e,l)=>{let a=parseFloat(t[n].results[l].total),i=b[l].toFixed(2),c=new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a),o=l%v.length;return(0,s.jsxs)(r.Fragment,{children:[0!==l&&(0,s.jsx)("div",{className:"mb-3"}),(0,s.jsx)("div",{className:"w-full space-x-2",children:(0,s.jsx)("div",{className:"relative h-3 bg-isSystemLightSecondary rounded-2xl overflow-hidden",children:(0,s.jsx)("div",{className:"absolute top-0 h-3 rounded-2xl",style:{width:"".concat(i,"%"),backgroundColor:v[o]}})})}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between w-full mt-1",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("div",{className:"truncate text-ellipsis max-w-[7rem]",children:e})," ",(0,s.jsxs)("div",{children:[", ",i,"%"]})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[c," votes"]})]})]},l)})})})})}),(0,s.jsx)(u.Hr,{classes:(0,a.Z)("!mt-5")}),(0,s.jsx)("div",{className:"uppercase text-isLabelLightSecondary !mt-2 text-base font-500",children:"Proposal Summary"}),(0,s.jsx)("div",{className:"!mt-2 rounded-xl p-4 text-sm text-isLabelLightPrimary bg-isWhite leading-tight relative font-400 break-words remove-all",children:t[n].summary})]})})},x=e=>{let{proposalMap:t,protocol:l}=e;(0,n.useParams)();let[d,x]=(0,r.useState)("all"),{activeProposal:f,setActiveProposal:h}=(0,c.o)(),g=Object.keys(t).map(e=>t[e]);g.sort((e,t)=>t.endtime-e.endtime);let p=g.filter(e=>{let t=Math.floor(Date.now()/1e3),l=e.endtime-t;return"all"===d||("active"===d?l>0:"closed"===d&&l<0)});return(0,s.jsxs)(r.Fragment,{children:[null===f&&(0,s.jsx)(u.mQ,{list:["all","active","closed"],setter:x,active:d,classes:(0,a.Z)("!pt-0 !px-0 !max-w-none mt-1")}),(0,s.jsxs)("div",{id:"proposal-detail",className:(0,a.Z)("w-full overflow-y-auto grow !space-y-2 text-md hide-scrollbar rounded-xl mt-5 pb-20",i.k2,i.d,null!==f&&"mt-3"),children:[null!==f&&(0,s.jsx)(m,{proposalMap:t,protocol:l}),null===f&&(0,s.jsxs)(r.Fragment,{children:[p.map(e=>(Date.now(),e.starttime,e.endtime,Date.now(),(0,s.jsxs)("button",{onClick:()=>{h(e.id);let t=document.getElementById("proposal-detail");t&&t.scrollTo({top:0,left:0,behavior:"smooth"})},className:"w-full hover:bg-isSystemLightTertiary bg-isWhite rounded-2xl !mt-0 p-4 flex flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col grow w-[calc(100%-3rem)]",children:[(0,s.jsx)("div",{className:"w-full flex flex-row items-center space-x-1 font-400 text-base",children:(0,s.jsx)("div",{className:"tracking-tight rounded-md w-fit text-isLabelLightSecondary ",children:function(e){let t=new Date,l=new Date(1e3*e)-t,s=Math.abs(Math.floor(l/1e3)),r=Math.abs(Math.floor(s/60)),a=Math.abs(Math.floor(r/60)),i=Math.abs(Math.floor(a/24)),n=Math.abs(Math.floor(i/7)),c=Math.abs(Math.floor(i/30)),o=Math.abs(Math.floor(i/365));return l<0?o>0?"".concat(o,"y ago"):c>0?"".concat(c,"mo ago"):n>0?"".concat(n,"w ago"):i>0?"".concat(i,"d ago"):a>0?"".concat(a,"h ago"):r>0?"".concat(r,"min ago"):"".concat(s,"s ago"):o>0?"in ".concat(o,"y"):c>0?"in ".concat(c,"mo"):n>0?"in ".concat(n,"w"):i>0?"in ".concat(i,"d"):a>0?"in ".concat(a,"h"):r>0?"in ".concat(r,"min"):"in ".concat(s,"s")}(e.starttime)})}),(0,s.jsx)("div",{className:(0,a.Z)("w-full text-isLabelLightPrimary font-400 text-left truncate text-ellipsis text-base",i.k2),children:e.title.replace(/"/g,"")})]}),(0,s.jsx)("div",{className:"shrink-0 ml-5 w-5 self-center",children:(0,s.jsx)(o.Qw,{classes:(0,a.Z)("w-5 h-5 fill-isLabelLightSecondary")})})]},e.id))),0===p.length&&(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center mt-8 place-content-center",children:[(0,s.jsx)(o.lh,{classes:(0,a.Z)("h-16 w-16 fill-isGrayLight2")}),(0,s.jsx)("div",{className:"w-full text-lg text-center font-600 text-isLabelLightPrimary",children:"Didn't find any proposals."}),(0,s.jsx)("div",{className:"text-sm text-isLabelLightSecondary font-500",children:"Check back later."})]})})]})]})]})}},1148:function(e,t,l){"use strict";l.d(t,{PageLoader:function(){return c}});var s=l(5862),r=l(7058),a=l(6357),i=l(4332),n=l(5296);let c=e=>{let{children:t}=e,{pageLoading:l,setPageLoading:c}=(0,a.o)();return((0,r.useEffect)(()=>{c(!1)},[l]),!1===l)?(0,s.jsx)(r.Fragment,{children:t}):(0,s.jsx)("div",{className:"flex flex-col items-center w-full p-4 place-content-center",children:(0,s.jsx)(i.$,{classes:(0,n.Z)("w-5 h-5 border-isBlueLight")})})}},4332:function(e,t,l){"use strict";l.d(t,{$:function(){return a}});var s=l(5862),r=l(5296);let a=e=>{let{classes:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("inline-block border-[3.5px] rounded-full animate-spin  border-t-transparent drop-shadow-sm",t),role:"status","aria-label":"loading",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}},7783:function(e,t,l){"use strict";l.d(t,{$:function(){return s.$}});var s=l(4332);l(1148)},5978:function(e,t,l){"use strict";l.d(t,{Hr:function(){return n},mQ:function(){return c},Vp:function(){return o},Dx:function(){return i}});var s=l(5862),r=l(5296),a=l(8187);let i=e=>{let{text:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full text-4xl text-isLabelLightPrimary font-700 pl-4 pt-3",a.k2,a.d),children:t})},n=e=>{let{classes:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full",a.d,t),children:(0,s.jsx)("hr",{className:(0,r.Z)("w-full rounded-full bg-isSeparatorLight")})})},c=e=>{let{list:t,setter:l,active:i,classes:n}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full max-w-md px-4",n),children:(0,s.jsx)("div",{className:(0,r.Z)("w-full p-[0.16rem] rounded-xl bg-isFillLightTertiary text-sm  grid grid-cols-3 gap-[0.16rem] text-isLabelLightPrimary font-500",a.d),children:t.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{l(e)},className:(0,r.Z)("w-full text-center capitalize rounded-lg py-1",a.k2,i===e?"bg-isWhite":""),children:e},t))})})},o=e=>{let{text:t,bg:l}=e;return(0,s.jsx)("div",{className:(0,r.Z)("px-[0.4rem] mr-2 text-sm py-[0.125rem] rounded-md text-isWhite font-400 tabular-nums",l),children:t})}},8926:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return c},getImageProps:function(){return n}});let s=l(3711),r=l(8274),a=l(7784),i=s._(l(4708));function n(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}}let c=a.Image}},function(e){e.O(0,[464,674,482,158,660,744],function(){return e(e.s=1908)}),_N_E=e.O()}]);
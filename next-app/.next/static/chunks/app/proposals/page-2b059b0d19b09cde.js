(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{1908:function(e,t,l){Promise.resolve().then(l.bind(l,8289)),Promise.resolve().then(l.bind(l,8863)),Promise.resolve().then(l.bind(l,5268)),Promise.resolve().then(l.bind(l,9184)),Promise.resolve().then(l.bind(l,1148))},8289:function(e,t,l){"use strict";l.d(t,{Header:function(){return o}});var s=l(5862),r=l(7058),a=l(8926),n=l.n(a),i=l(6357);let o=e=>{let{protocolInfo:t}=e,{activeProposal:l,setActiveProposal:a}=(0,i.o)();return(0,s.jsx)(r.Fragment,{children:null===l&&(0,s.jsx)("div",{className:"contents",children:(0,s.jsxs)("div",{className:"flex flex-col items-center w-full my-2 space-y-2",children:[(0,s.jsxs)("div",{className:"relative w-[4.5rem] h-[4.5rem] overflow-hidden rounded-full",children:[(0,s.jsx)("div",{className:"absolute w-full h-full bg-gradient-to-br from-isWhite to-isSystemLightTertiary animate-pulse"}),(0,s.jsx)(n(),{fill:!0,src:t.icon,alt:"Logo of ".concat(t.name," protocol")})]}),(0,s.jsx)("div",{className:"inline-block w-full text-xl text-center font-600 text-isLabelLightPrimary",children:t.name})]})})})}},8863:function(e,t,l){"use strict";l.d(t,{Manage:function(){return r}}),l(5862);var s=l(7058);l(4231),l(107),(0,l(6404).$)("9977ed591f4dffb1a610662d81af2680cfccfacd"),l(7516),l(5296),l(8187),l(6357),l(7783),l(5978);let r=()=>{s.Suspense}},5268:function(e,t,l){"use strict";l.d(t,{Navigator:function(){return s}}),l(5862),l(8187),l(6357),l(5296),l(4231),l(7516);let s=()=>{Suspense}},9184:function(e,t,l){"use strict";l.d(t,{RenderList:function(){return x}});var s=l(5862),r=l(7058),a=l(5296),n=l(8187),i=l(7516),o=l(6357),c=l(2789);l(4231),l(107);var d=(0,l(6404).$)("71aa5649846fce8ebe08023203df78b9d8db3d88"),m=l(5978);let u=e=>{let{proposalMap:t,protocol:l}=e,{activeProposal:i,user:u,setUser:x}=(0,o.o)();Date.now(),t[i].starttime,t[i].endtime,Date.now();let f={starttime:1e3*t[i].starttime,endtime:1e3*t[i].endtime},h={startDate:new Date(f.starttime),endDate:new Date(f.endtime)},g=Intl.DateTimeFormat().resolvedOptions().timeZone;h.startDate.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0,timeZone:g}),h.endDate.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0,timeZone:g});let b=0,p=0,v=u.bookmarks.includes(i);t[i].results&&0!==t[i].results.length&&(b=t[i].results.reduce((e,t)=>e+parseFloat(t.total),0),p=t[i].results.map((e,t)=>parseFloat(e.total)/b*100));let w=["rgb(0, 199, 190)","rgb(50, 173, 230)","rgb(0, 122, 255)","rgb(88, 86, 214)","rgb(175, 82, 222)","rgb(255, 45, 85)","rgb(162, 132, 94)"],{value:j,unit:y,tense:N}=function(e){let t=new Date,l=new Date(e)-t,s=Math.floor(l/1e3/60/60/24),r=Math.floor(s/30),a=Math.floor(s/365);return a>0?{value:a,unit:"years",tense:l>=0?"left":"ago"}:r>0?{value:r,unit:"months",tense:l>=0?"left":"ago"}:s>0?{value:s,unit:"days",tense:l>=0?"left":"ago"}:{value:"0",unit:"days",tense:"left"}}(1e3*t[i].endtime);return(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("div",{id:"",className:"w-full px-3 pt-1 pb-2 rounded-xl",children:[(0,s.jsxs)("div",{className:"z-10 flex flex-row items-center justify-between w-full space-x-1 text-sm font-500 place-content-end",children:[(0,s.jsx)("button",{className:(0,a.Z)("flex flex-row items-center font-500 px-3 py-1 leading-tight rounded-lg bg-isBlueLight text-isLabelDarkPrimary !-ml-1",n.k2),children:l}),(0,s.jsx)("div",{}),(0,s.jsxs)("button",{onClick:async()=>{let e=u.bookmarks;n.AL,x(e.includes(i)?{...u,bookmarks:e.filter(e=>e!==i)}:{...u,bookmarks:[...e,i]}),await d({username:u.id,proposal:i})},className:(0,a.Z)("flex flex-row items-center px-3  py-1 leading-tight rounded-lg text-isLabelDarkPrimary !-mr-1",n.k2,v?"bg-isGreenLight":"bg-isOrangeLight"),children:[(0,s.jsx)("div",{className:"font-500",children:v?"Bookmarked":"Bookmark"}),v?(0,s.jsx)(c.od,{classes:(0,a.Z)("h-5 w-5 ml-[0.2rem] -mr-1 fill-isLabelDarkPrimary")}):(0,s.jsx)(c.kw,{classes:(0,a.Z)("h-5 w-5 -mr-1 fill-isLabelDarkPrimary")})]})]}),(0,s.jsx)("div",{className:"py-2 mt-2 text-xl tracking-tight leading-tight text-left text-isLabelLightPrimary font-600",children:t[i].title.replace(/"/g,"")}),(0,s.jsx)("hr",{className:"mb-5 rounded-full bg-isSeparatorLight mt-2"}),(0,s.jsxs)("div",{className:"w-full flex flex-row items-center space-x-4 h-12",children:[(0,s.jsxs)("div",{className:"w-5/12 flex justify-evenly flex-row items-center place-content-center bg-isWhite text-isLabelLightPrimary rounded-xl h-full",children:[(0,s.jsx)("div",{className:"w-fit flex flex-col items-end place-content-center text-3xl shrink-0 font-700 text-isSystemDarkTertiary",children:j}),(0,s.jsxs)("div",{className:"flex flex-col items-start w-fit text-isLabelLightSecondary leading-tight font-500",children:[(0,s.jsx)("div",{children:y}),(0,s.jsx)("div",{children:N})]})]}),t[i].url&&null!==t[i].url&&"undefined"!==t[i].url&&(0,s.jsx)("a",{href:t[i].url,rel:"noopener noreferrer",target:"_blank",className:"w-7/12 flex flex-col items-center place-content-center bg-isBlueLight text-lg font-600 text-isWhite rounded-xl h-full",children:"Vote Now"})]}),t[i].results&&0!==t[i].results.length&&(0,s.jsx)("div",{className:"w-full h-fit mt-5",children:(0,s.jsx)("div",{className:"flex flex-col items-center w-full bg-isWhite p-4 rounded-xl",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"flex flex-col items-center w-full text-xs capitalize rounded-lg bg-isWhite text-isLabelLightSecondary font-400",children:t[i].choices.map((e,l)=>{let a=parseFloat(t[i].results[l].total),n=p[l].toFixed(2),o=new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a),c=l%w.length;return(0,s.jsxs)(r.Fragment,{children:[0!==l&&(0,s.jsx)("div",{className:"mb-3"}),(0,s.jsx)("div",{className:"w-full space-x-2",children:(0,s.jsx)("div",{className:"relative h-3 bg-isSystemLightSecondary rounded-2xl overflow-hidden",children:(0,s.jsx)("div",{className:"absolute top-0 h-3 rounded-2xl",style:{width:"".concat(n,"%"),backgroundColor:w[c]}})})}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between w-full mt-1",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("div",{className:"truncate text-ellipsis max-w-[7rem]",children:e})," ",(0,s.jsxs)("div",{children:[", ",n,"%"]})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[o," votes"]})]})]},l)})})})})}),(0,s.jsx)(m.Hr,{classes:(0,a.Z)("!mt-5")}),(0,s.jsx)("div",{className:"uppercase text-isLabelLightSecondary !mt-2 text-base font-500",children:"Proposal Summary"}),(0,s.jsx)("div",{className:"!mt-2 rounded-xl p-4 text-sm text-isLabelLightPrimary bg-isWhite leading-tight relative font-400 break-words remove-all",children:t[i].summary})]})})},x=e=>{let{proposalMap:t,protocol:l}=e;(0,i.useParams)();let[d,x]=(0,r.useState)("all"),{activeProposal:f,setActiveProposal:h}=(0,o.o)(),g=Object.keys(t).map(e=>t[e]);g.sort((e,t)=>t.endtime-e.endtime);let b=g.filter(e=>{let t=Math.floor(Date.now()/1e3),l=e.endtime-t;return"all"===d||("active"===d?l>0:"closed"===d&&l<0)});return(0,s.jsxs)(r.Fragment,{children:[null===f&&(0,s.jsx)(m.mQ,{list:["all","active","closed"],setter:x,active:d,classes:(0,a.Z)("!pt-0 !px-0 !max-w-none mt-1")}),(0,s.jsxs)("div",{id:"proposal-detail",className:(0,a.Z)("w-full overflow-y-auto grow !space-y-2 text-md hide-scrollbar rounded-xl mt-5 pb-20",n.k2,n.d,null!==f&&"mt-3"),children:[null!==f&&(0,s.jsx)(u,{proposalMap:t,protocol:l}),null===f&&(0,s.jsxs)(r.Fragment,{children:[b.map(e=>(Date.now(),e.starttime,e.endtime,Date.now(),(0,s.jsxs)("button",{onClick:()=>{h(e.id);let t=document.getElementById("proposal-detail");t&&t.scrollTo({top:0,left:0,behavior:"smooth"})},className:"w-full hover:bg-isSystemLightTertiary bg-isWhite rounded-2xl !mt-0 p-4 flex flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col grow w-[calc(100%-3rem)]",children:[(0,s.jsx)("div",{className:"w-full flex flex-row items-center space-x-1 font-400 text-base",children:(0,s.jsx)("div",{className:"tracking-tight rounded-md w-fit text-isLabelLightSecondary ",children:function(e){let t=new Date,l=new Date(1e3*e)-t,s=Math.abs(Math.floor(l/1e3)),r=Math.abs(Math.floor(s/60)),a=Math.abs(Math.floor(r/60)),n=Math.abs(Math.floor(a/24)),i=Math.abs(Math.floor(n/7)),o=Math.abs(Math.floor(n/30)),c=Math.abs(Math.floor(n/365));return l<0?c>0?"".concat(c,"y ago"):o>0?"".concat(o,"mo ago"):i>0?"".concat(i,"w ago"):n>0?"".concat(n,"d ago"):a>0?"".concat(a,"h ago"):r>0?"".concat(r,"min ago"):"".concat(s,"s ago"):c>0?"in ".concat(c,"y"):o>0?"in ".concat(o,"mo"):i>0?"in ".concat(i,"w"):n>0?"in ".concat(n,"d"):a>0?"in ".concat(a,"h"):r>0?"in ".concat(r,"min"):"in ".concat(s,"s")}(e.starttime)})}),(0,s.jsx)("div",{className:(0,a.Z)("w-full text-isLabelLightPrimary font-400 text-left truncate text-ellipsis text-base",n.k2),children:e.title.replace(/"/g,"")})]}),(0,s.jsx)("div",{className:"shrink-0 ml-5 w-5 self-center",children:(0,s.jsx)(c.Qw,{classes:(0,a.Z)("w-5 h-5 fill-isLabelLightSecondary")})})]},e.id))),0===b.length&&(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center mt-8 place-content-center",children:[(0,s.jsx)(c.lh,{classes:(0,a.Z)("h-16 w-16 fill-isGrayLight2")}),(0,s.jsx)("div",{className:"w-full text-lg text-center font-600 text-isLabelLightPrimary",children:"Didn't find any proposals."}),(0,s.jsx)("div",{className:"text-sm text-isLabelLightSecondary font-500",children:"Check back later."})]})})]})]})]})}},1148:function(e,t,l){"use strict";l.d(t,{PageLoader:function(){return o}});var s=l(5862),r=l(7058),a=l(6357),n=l(4332),i=l(5296);let o=e=>{let{children:t}=e,{pageLoading:l,setPageLoading:o}=(0,a.o)();return((0,r.useEffect)(()=>{o(!1)},[l]),!1===l)?(0,s.jsx)(r.Fragment,{children:t}):(0,s.jsx)("div",{className:"flex flex-col items-center w-full p-4 place-content-center",children:(0,s.jsx)(n.$,{classes:(0,i.Z)("w-5 h-5 border-isBlueLight")})})}},4332:function(e,t,l){"use strict";l.d(t,{$:function(){return a}});var s=l(5862),r=l(5296);let a=e=>{let{classes:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("inline-block border-[3.5px] rounded-full animate-spin  border-t-transparent drop-shadow-sm",t),role:"status","aria-label":"loading",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}},7783:function(e,t,l){"use strict";l.d(t,{$:function(){return s.$}});var s=l(4332);l(1148)},5978:function(e,t,l){"use strict";l.d(t,{Hr:function(){return i},mQ:function(){return o},Vp:function(){return c},Dx:function(){return n}});var s=l(5862),r=l(5296),a=l(8187);let n=e=>{let{text:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full text-4xl text-isLabelLightPrimary font-700 pl-4 pt-3",a.k2,a.d),children:t})},i=e=>{let{classes:t}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full",a.d,t),children:(0,s.jsx)("hr",{className:(0,r.Z)("w-full rounded-full bg-isSeparatorLight")})})},o=e=>{let{list:t,setter:l,active:n,classes:i}=e;return(0,s.jsx)("div",{className:(0,r.Z)("w-full max-w-md px-4",i),children:(0,s.jsx)("div",{className:(0,r.Z)("w-full p-[0.16rem] rounded-xl bg-isFillLightTertiary text-sm  grid grid-cols-3 gap-[0.16rem] text-isLabelLightPrimary font-500",a.d),children:t.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{l(e)},className:(0,r.Z)("w-full text-center capitalize rounded-lg py-1",a.k2,n===e?"bg-isWhite":""),children:e},t))})})},c=e=>{let{text:t,bg:l}=e;return(0,s.jsx)("div",{className:(0,r.Z)("px-[0.4rem] mr-2 text-sm py-[0.125rem] rounded-md text-isWhite font-400 tabular-nums",l),children:t})}},8926:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return o},getImageProps:function(){return i}});let s=l(3711),r=l(8274),a=l(7784),n=s._(l(4708));function i(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}}let o=a.Image}},function(e){e.O(0,[464,674,482,158,660,744],function(){return e(e.s=1908)}),_N_E=e.O()}]);